{% extends 'base.html.twig' %}
{% block sidebar %}

{% endblock %}
{% block body %}
		<p>
			Welcome to the world of Elthelas, feel free to browse the map at the right, or select one of the links below to lookup specific
			information on an area or location.
		</p>
    <input type="button" value="Landmarks" id="landmarks" class="btn btn-default" />
    <input type="button" value="Cities" id="cities" class="btn btn-default" />
    <input type="button" value="Nations" id="nations" class="btn btn-default" />
    <input type="button" value="Continents and Oceans" id="continents" class="btn btn-default" />
    <input type="button" value="Geographical Features" id="features" class="btn btn-default" />
    <input type="button" value="Clear" id="clear" class="btn btn-default" />
  		<div id="map" style="width: 100%; height: 800px; margin: 10px; float: right;"></div>
    
{% endblock %}
{% block javascripts %}
  <!--<script src="{{asset('angularjs/1.3.14/angular.min.js', 'cdn')}}"></script>-->
  <script src="{{asset('jquery/2.1.3/jquery.min.js', 'cdn')}}"></script>
  <script src="{{asset('jqueryui/1.11.3/jquery-ui.min.js', 'cdn')}}"></script>
  {% javascripts '@AppBundle/libraries/*' '@AppBundle/js/initialize.js' output='js/script.js'%}
    <script src="{{ asset_url }}"></script>
  {% endjavascripts %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js"></script>
	
  <script type="text/javascript">
    var routebase = "{{ path("locdata", {'type': 'cities', 'location': 'alados' }) }}";
    $("#main").removeClass("col-md-10").addClass("col-md-12");
    $("#sidebar").remove();
		var map = L.map('map').setView([0, 0], 2);
    //Uncomment this code to enable getting lattitude and longitude figures by clicking on the map, useful for placing new markers
    map.on('click', function(e) {
      //alert("Lat, Lon : " + e.latlng.lat + ", " + e.latlng.lng);
    });
		L.tileLayer('/images/maps/tiles/{z}/{y}/{x}.png', {
		    attribution: '|--------| = 320/160/80/40 miles by zoom | map image created by Heather Domaszek',
			minZoom: 0,
		    maxZoom: 4,
		    tms: true,
		    continuousWorld: true
		    //noWrap: true
		}).addTo(map);
		var markers = [];
		function clearmarkers() {
			for(i = 0;i<markers.length;i++) {
				map.removeLayer(markers[i]);
			}		
			markers = [];
    }
    function addoverlay(locationurl) {
        var overlay = $("<div class='lightbox'></div>");
        var backing = $("<div class='lightback'></div>");
        var close = $("<input type='button' class='btn btn-danger closelightbox' value='Close' />");
        close.click(function() {
          $(".lightback").remove();
        });
        overlay.html("<h4>Loading...</h4>");
        overlay.append(close);
        backing.append(overlay);
        $("body").append(backing);
        $.get(locationurl, function(data) {
          ga('send', 'pageview', locationurl);
          overlay.html(" ");
          close = $("<input type='button' class='btn btn-danger closelightbox' value='Close' />");
          close.click(function() {
            $(".lightback").remove();
          });
          overlay.append(close);
          overlay.append(data);
        });
    }
		function addmarker(markers, name, coordinates, type) {
      var locationurl = routebase.slice(0,-13) + type + "/" + name;
      marker = L.marker(coordinates);
      $(marker).click(function() {
        addoverlay(locationurl);
      });
      markers.push(marker);
      map.addLayer(marker);
		}
    $("#nations").click(function() {
      clearmarkers();
      var type="nations";
      addmarker(markers, "alfadir", [-56,-94], type);
      var alfadir = L.polygon([ new L.LatLng(-59.9, -107.2), new L.LatLng(-57.3, -103.6),
                               new L.LatLng(-54, -104),
                               new L.LatLng(-47.5, -81.7),
                               new L.LatLng(-59.6, -85.4),
                               new L.LatLng(-59, -97.6),
                               ],
                              {stroke: false, color: '#FFFF00'});
      markers.push(alfadir);
      map.addLayer(alfadir);
      addmarker(markers, "tiaovcoast", [-64.6, -109], type);
      var tiaovcoast = L.polygon([ new L.LatLng(-70.7, -115.3), new L.LatLng(-64.2, -103.1), new L.LatLng(-59.6, -85.4),
                                  new L.LatLng(-59, -97.6),
                                  new L.LatLng(-59.9, -107.2),
                                  new L.LatLng(-62.2, -109.9),
                                  new L.LatLng(-62.9, -113),
                                  new L.LatLng(-66.2, -117.2)
                                  ],
                                 {stroke: false, color: '#222200'});
      markers.push(tiaovcoast);
      map.addLayer(tiaovcoast);
      addmarker(markers, "gorgro", [-70,-100], type);
      var gorgro = L.polygon([ new L.LatLng(-65.8,-97.8), new L.LatLng(-70.9,-106.7),
                              new L.LatLng(-71.9, -101.9),
                              new L.LatLng(-70.3, -94.9),
                              new L.LatLng(-65.2, -92.6)
                              ],
                              {stroke: false, color: '#222200'});
      markers.push(gorgro);
      map.addLayer(gorgro);
			addmarker(markers, "icewastes", [-74,-110], type);
      var icewastes = L.polygon([new L.LatLng(-71.8, -116.5), new L.LatLng(-73, -122.5),
                                 new L.LatLng(-74.2, -123.2), new L.LatLng(-74.8, -121.2),
                                 new L.LatLng(-75.4, -116), new L.LatLng(-75.3, -98),
                                 new L.LatLng(-74.7, -94.5), new L.LatLng(-73.9, -92.6),
                                 new L.LatLng(-73.1, -89.1), new L.LatLng(-71.8, -90),
                                 new L.LatLng(-72.5, -105.7)], {stroke: false, color: '#222200'});
      markers.push(icewastes);
      map.addLayer(icewastes);
      addmarker(markers, "staelia", [-67,-75], type);
      var staelia = L.polygon([ new L.LatLng(-73.1,-89.1), new L.LatLng(-71.8,-90),
                               new L.LatLng(-68.3, -89.0), new L.LatLng(-65.5, -85.8),
                               new L.LatLng(-61.4, -77.6), new L.LatLng(-61.6, -75),
                               new L.LatLng(-61.6, -65.6), new L.LatLng(-67.4, -70.1),
                               new L.LatLng(-68.3, -73.2), new L.LatLng(-70, -77.4),
                               new L.LatLng(-70.3, -81.6), new L.LatLng(-71.9, -86.2)],
                              {stroke: false, color: '#FF0000'});
      markers.push(staelia);
      map.addLayer(staelia);
      addmarker(markers, "arad", [5,132], type);
      var arad = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#222200'});
      map.addLayer(arad);
      addmarker(markers, "curinor", [50,55], type);
      var curinor = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(curinor);
      addmarker(markers, "degakta", [-60,60], type);
      var degakta = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(degakta);
      addmarker(markers, "demalthor", [20,55], type);
      var demalthor = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(demalthor);
      addmarker(markers, "dera", [26,-125], type);
      var dera = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(dera);
      addmarker(markers, "deradragorim", [30,-85], type);
      var deradragorim = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(deradragorim);
      addmarker(markers, "dormania", [60,135], type);
      var dormania = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(dormania);
      addmarker(markers, "dragonhome", [0,-130], type);
      var dragonhome = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(dragonhome);
      addmarker(markers, "eldoran", [30,-10], type);
      var eldoran = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(eldoran);
      addmarker(markers, "gerasalim", [40,110], type);
      var gerasalim = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(gerasalim);
      addmarker(markers, "gnarra", [-5,-30], type);
      var gnarra = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(gnarra);

      addmarker(markers, "hisrudetan", [-34,-92], type);
      var hisrudetan = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(hisrudetan);
      addmarker(markers, "kandor", [65,91], type);
      var kandor = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(kandor);
      addmarker(markers, "malinval", [-10,90], type);
      var malinval = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(malinval);
      addmarker(markers, "morrindim", [-45,-20], type);
      var morrindim = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(morrindim);
      addmarker(markers, "nerim", [-60,125], type);
      var nerim = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(nerim);
      addmarker(markers, "olda", [-17,-2], type);
      var olda = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(olda);
      addmarker(markers, "riftlanwilds", [-22,-145], type);
      var riftlanwilds = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(riftlanwilds);
      addmarker(markers, "sage", [-34,-70], type);
      var sage = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(sage);
      addmarker(markers, "seran", [-43,140], type);
      var seran = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(seran);
      addmarker(markers, "shendarel", [-2,-4], type);
      var shendarel = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(shendarel);
      addmarker(markers, "stagenheim", [-56,-70], type);
      var stagenheim = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(stagenheim);
      addmarker(markers, "terron", [-5,146], type);
      var terron = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(terron);
      addmarker(markers, "zelfir", [-54,-127], type);
      var zelfir = L.polygon([ new L.LatLng(0,0), new L.LatLng(0,0)],
                              {stroke: false, color: '#FFFF00'});
      map.addLayer(zelfir);
      
    });
		$("#landmarks").click(function() {
			//clear the old markers
			clearmarkers();
			
			//create new ones
			var type = "landmarks";
      addmarker(markers, "curestan", [65,102], type);
      addmarker(markers, "abyssalgateofdera", [27,-134], type);
			addmarker(markers, "abyssalgateofmarinda", [-60,84.5], type);
			addmarker(markers, "dalokra", [0,79.5], type);
			addmarker(markers, "dera", [26,-125], type);
			addmarker(markers, "fang", [-65,114], type);
			addmarker(markers, "fortressoflight", [17.5,90], type);
			addmarker(markers, "gaiasgrove", [-5,-30], type);
			addmarker(markers, "godspire", [40,-5], type);
			addmarker(markers, "greatramp", [36.5,144], type);
			addmarker(markers, "irontriangle", [-53,143.5], type);
			addmarker(markers, "nerim", [-60,125], type);
			addmarker(markers, "peloria", [-20,118], type);
			addmarker(markers, "sorcerersprison", [-43,-158], type);

		});
    $("#continents").click(function() {
      clearmarkers();
      
      var type = "continents";
      addmarker(markers,"amatheranocean", [-70, -145], type);
      addmarker(markers, "atyrea", [-56, -82], type);
      addmarker(markers, "dragonsea", [-37, -115], type);
      addmarker(markers, "easternocean", [55, 174], type);
      addmarker(markers, "elathia", [20, 90], type);
      addmarker(markers, "iceocean", [75, 50], type);
      addmarker(markers, "mermaidsea", [-58, -112], type);
      addmarker(markers, "riftlan", [-15, -145], type);
      addmarker(markers, "southsea", [-75, 50], type);
      addmarker(markers, "tradesea", [5,-40], type);
      
    });
    $("#cities").click(function() {
      clearmarkers();
      var type = "cities";
      addmarker(markers, "alados", [-52.7, 25.8], type);
      addmarker(markers, "albeliath", [11, 140], type);
      addmarker(markers, "aridhem", [13,63.5], type);
      addmarker(markers, "atyrao", [-52.9, -104.4], type);
      addmarker(markers, "barak", [-17.3, 2.5], type);
      addmarker(markers, "craftheim", [-50.8, -70.3], type);
      addmarker(markers, "curinkeep", [60.5, 64.5], type);
      addmarker(markers, "damat", [-57.1, -102.3], type);
      addmarker(markers, "delan", [27.2, -92.4], type);
      addmarker(markers, "dera", [28.5, -120.9], type);
      addmarker(markers, "desadorel", [56.7, 147.2], type);
      addmarker(markers, "dieel", [-53.5, -89.4], type);
      addmarker(markers, "dima", [51.1, -21.6], type);
      addmarker(markers, "diya", [-18.3, -3.3], type);
      addmarker(markers, "eastguard", [31.5,119.5], type);
      addmarker(markers, "estapor", [-10.3, 24.5], type);
      addmarker(markers, "falak", [66.2, 163.3], type);
      addmarker(markers, "faran", [-0.9, 131.7], type);
      addmarker(markers, "farengar", [67.6, 124.1], type);
      addmarker(markers, "forbel", [-8.4, 65.4], type);
      addmarker(markers, "fradae", [-55.6, -101.9], type);
      addmarker(markers, "gnoma", [-56.8, -75.5], type);
      addmarker(markers, "granitebluff", [34.5, 83.5], type);
      addmarker(markers, "gulutheim", [-42.5,88], type);
      addmarker(markers, "highhammer", [38.7, 78.4], type);
      addmarker(markers, "ifritan", [-58.1, -64.5], type);
      addmarker(markers, "instar", [-67.1, -69.9], type);
      addmarker(markers, "kaland", [69.6, 79.1], type);
      addmarker(markers, "kelas", [-64.4, -75.5], type);
      addmarker(markers, "kimly", [-39.9, 141.5], type);
      addmarker(markers, "lastwatch", [-46.4, -138.5], type);
      addmarker(markers, "loridesa", [32.4, -28.1], type);
      addmarker(markers, "makhol", [-15.5, 45.6], type);
      addmarker(markers, "makir", [2.8, 96.5], type);
      addmarker(markers, "malgeth", [24.5, 125.2], type);
      addmarker(markers, "malidal", [35, 145.4], type);
      addmarker(markers, "mandon", [-49.2, -117.2], type);
      addmarker(markers, "marinda", [-60,84.5], type);
      addmarker(markers, "marinval", [-12.4, 83.5], type);
      addmarker(markers, "milan", [30, -0.1], type);
      addmarker(markers, "mordaserekhai", [-14.5, 116], type);
      addmarker(markers, "morrind", [-52,-16], type);
      addmarker(markers, "nerim", [-60,125], type);
      addmarker(markers, "northport", [55, 105.2], type);
      addmarker(markers, "ochreken", [-42.6, 62.8], type);
      addmarker(markers, "parakas", [18, 105], type);
      addmarker(markers, "pelgan", [-70.6, -82.7], type);
      addmarker(markers, "peloria", [-19.6, 119], type);
      addmarker(markers, "poron", [37.7, 144.9], type);
      addmarker(markers, "portsmith", [16.3, -116], type);
      addmarker(markers, "punbar", [-11.4, -1.5], type);
      addmarker(markers, "purs", [60.2, 87.2], type);
      addmarker(markers, "sage", [-32.5, -62.9], type);
      addmarker(markers, "seldan", [-32.8, -141.3], type);
      addmarker(markers, "shodal", [-40.7, -92.8], type);
      addmarker(markers, "sofala", [32.8, 15], type);
      addmarker(markers, "sreppe", [59.5, 119], type);
      addmarker(markers, "storval", [35.9, 47.9], type);
      addmarker(markers, "stromforde", [63.2, 61.6], type);
      addmarker(markers, "strovenguard", [37.3, 106.4], type);
      addmarker(markers, "sunra", [-60, 62.1], type);
      addmarker(markers, "swava", [-2.5, 0.2], type);
      addmarker(markers, "tarum", [-19, -82.4], type);
      addmarker(markers, "tenecha", [-3.2, 151.9], type);
      addmarker(markers, "torinhammer", [59.8, 58.8], type);
      addmarker(markers, "vasha", [33.4, -76.1], type);
      addmarker(markers, "vashna", [31.5, -75.5], type);
      addmarker(markers, "westport", [66.5, 66.1], type);
      addmarker(markers, "zelfin", [-59.5, -130], type);
    });
		$("#features").click(function() {
			//clear the old markers
			clearmarkers();
			
			//create new ones
			var type = "features";
			addmarker(markers, "blackshardpass", [28,121], type);
			addmarker(markers, "blightedgap", [16,85], type);
			addmarker(markers, "demonpeaks", [-16,-160], type);
			addmarker(markers, "desertdespair", [-22,55], type);
			addmarker(markers, "fireislands", [-58,-61], type);
			addmarker(markers, "glasscliff", [-15,45], type);
			addmarker(markers, "goldenpass", [5,68], type);
			addmarker(markers, "mithrilhills", [42,45], type);
			addmarker(markers, "moonpass", [22,45], type);
			addmarker(markers, "nadrakriver", [0,115.5], type);
			addmarker(markers, "rustdesert", [10,100], type);
			addmarker(markers, "sarialake", [37,103], type);
			addmarker(markers, "serpentsspine", [-40,-46], type);
			addmarker(markers, "titanspeaks", [-55,123], type);
			addmarker(markers, "trollpass", [-68,-95], type);
			addmarker(markers, "undeadwoods", [37,0], type);
			addmarker(markers, "veldt", [0,-145], type);
			addmarker(markers, "worldcrack", [32,143], type);
			addmarker(markers, "smugglerspass", [16,-128], type);
			addmarker(markers, "miragelake", [14,-143], type);
			addmarker(markers, "dragonhomemountains", [-10,-132], type);
			addmarker(markers, "ruuriver", [-36,-82], type);
			addmarker(markers, "alfriver", [-54.5,-95], type);
			addmarker(markers, "dirriver", [-56.5,-90], type);
			addmarker(markers, "staelicriver", [-66,-81], type);
			addmarker(markers, "redriver", [-54,-136], type);
			addmarker(markers, "boundaryriver", [-41.5,-147], type);
			addmarker(markers, "mashashanariver", [-11,-145.5], type);
			addmarker(markers, "sindiokra", [-4,90.5], type);
			addmarker(markers, "sindidalelda", [40,-28], type);
			addmarker(markers, "sindisilmeranna", [6,46], type);
			addmarker(markers, "sindiohta", [35,47], type);
			addmarker(markers, "rockriver", [52,50], type);
			addmarker(markers, "runicmountains", [55,75], type);
			addmarker(markers, "blackpeaks", [22,110], type);
			addmarker(markers, "arururiver", [35,112.5], type);
			addmarker(markers, "arariver", [44,115], type);
			addmarker(markers, "dinariver", [43,96], type);
			addmarker(markers, "kandorriver", [62,94], type);
			addmarker(markers, "yellowriver", [66.5,122], type);
			addmarker(markers, "dormanriver", [62,150], type);
      addmarker(markers, "exodusisthmus", [-51,-110], type);
      addmarker(markers, "isleofpeaks", [-46.8,93.8], type);
		});
		$("#clear").click(function() {
			clearmarkers();
		});
   	{% if type is defined %}
      {% if location is defined %}
        var locstring = "{{ path('locdata', { 'type': type, 'location': location }) }}";
        $.get(locstring, function(data) {
            $("#sidebar").html(data);
        });
      {% endif %}
    {% endif %}
	</script>
  
{% endblock %}
